<div class="container">
	<h3>Home</h3>
	<!-- Navigation tabs: if notification is received, must enable tab in some other color, maybe with a green circle on it-->
	<ul class="nav nav-tabs">
		<li class="nav-item">
		  <button #friendTab class="nav-link" [ngClass]="{'active': showFriends}" aria-current="page" (click)="selectTab('friendTab')">Friends</button>
		</li>
		<li class="nav-item">
			<button #channelTab class="nav-link" [ngClass]="{'active': showChannels}" aria-current="page" (click)="selectTab('channelTab')">Channels</button>
		</li>
		<li class="nav-item">
			<button #scoreTab class="nav-link" aria-current="page">Scores</button>
		</li>
		<li class="nav-item">
			<button #notificationTab class="nav-link disabled" aria-current="page" tabindex="-1" aria-disabled="true">Notifications</button>
		</li>
	</ul>
    <form ngNativeValidate [ngClass]="{'hideComponent' : !showFriends}" class="form-group hideComponent" #set="ngForm" (ngSubmit)="onSubmitFriends()">
        <div>
            
            <div class="input-group mb-3 card-header">
                <input
					#searchUsers
					placeholder="Search friends..."
                    type="text"
                    name="searchUsers"
                    class="form-control search"
					autocomplete="off"
                    required
                />
				<div class="input-group-prepend">
					<button type="submit" class="input-group-text search_btn"><i class="fas fa-search"></i></button>
				</div>
				
				<div *ngIf='showUsers' class='container-fluid card h-100'>
					<div class="row justify-content-left">
						<!-- <div class="col-md-4 col-xl-3 chat"> -->
							<div class="mb-sm-3 mb-md-0 contacts_card">
								<div class="contacts_body">
									<ul class="contacts">
										<li class="active" *ngFor="let user of users">
											<div class="d-flex bd-highlight">
												<div class="img_cont">
													<img src={{user.avatar}} class="rounded-circle user_img">
													<span *ngIf="user.online" class="online_icon"></span>
													<span *ngIf="!user.online" class="online_icon offline"></span>
												</div>
												<div class="user_info">
													<span>{{user.nickname}}</span>
												</div>
												<div class="ms-3">
													<button class="btn" (click)="addFriendShip(user)">
														<i data-mdb-toggle="tooltip" title="Request a friendship" class="fa fa-user-plus"></i>
													</button>
												</div>
												<div class="ms-3">
													<button class="btn" (click)="addToGroup(user)">
														<i data-mdb-toggle="tooltip" title="Add user to a group" class="fa fa-users"></i>
													</button>
												</div>
												<!-- <button class="btn" (click)="selectChat(user)">
												<span class="fa fa-comment-dots"></span>
												</button> -->
											</div>
										</li>
									</ul>
								</div>
							</div>
						<!-- </div> -->
					</div>
					<div class="card-footer">
						<button class='btn-danger' (click)='clean()'> cancel</button>
					</div>
				</div>				
			</div>
    	</div>
		<div hidden="hidden">
			<textarea #grpUsers name="grpUser" rows="10" cols="30" disabled="true" hidden="hidden"></textarea>
			<br>
			<input
			#nChatElement
			placeholder="Name chat..."
			type="text"
			name="nameChat"
			class="input-control"
			autocomplete="off"
			required
			/>
			<button (click)="createGroupChat()">Create</button>
		</div>
    </form>
	<form ngNativeValidate [ngClass]="{'hideComponent' : !showChannels}" class="form-group hideComponent" #set="ngForm" (ngSubmit)="onSubmitChannel()">
		<div class="container-fluid mt-2">
			<div class="row mt-5">
				<div>
					<div class="col-5 form-group">
						<label for="channelName">Channel Name</label>
						<input
							type="text"
							name="channelName"
							class="form-control"
							[(ngModel)]="channelInfo.name_chat"
							placeholder="Type channel name..."
							required
						/>
					</div>
					<div class="col-5 form-group">
						<label for="type">Select Type</label>
						<select
							#chanType
							class="form-select form-select-sm mb-3"
							aria-label=".form-select-sm example"
							(change)="selectType($event.target)"
							required
							>
							<option disabled selected value> -- Select an option -- </option>
							<option value="public">Public</option>
							<option value="private">Private</option>
						</select>
					</div>
				</div>
				<div>
					<div class="form-check form-switch">
						<input #target class="form-check-input" type="checkbox" (change)="passCheckBox(target)">
						<label class="form-check-label" for="flexSwitchCheckDefault">Protect with password</label>
					</div>
					<div class="col-5 form-group" [ngClass]="{'hideComponent': !target.checked}">
						<label for="pass">Password</label>
						<input
							[(ngModel)]="pass"
							[ngClass]="{'passConfirmed': passConfirm&& (confirmPass.value.length>=6), notConfirmed: !passConfirm || (confirmPass.value.length<6)}"
							type="password"
							name="pass"
							minlength="6"
							class="form-control"
						/>
					</div>
					<div class="col-5 form-group" [ngClass]="{'hideComponent': !target.checked}">
						<label for="pass">Confirm Password</label>
						<input
							#confirmPass
							type="password"
							name="pass"
							minlength="6"
							class="form-control"
							[ngClass]="{'passConfirmed': passConfirm && (confirmPass.value.length>=6), notConfirmed: !passConfirm || (confirmPass.value.length<6)}"
							(keyup)="checkPass(confirmPass.value)"
						/>
					</div>
				</div>
			</div>						
			<button type="submit" class="mt-5 btn">Create a channel</button>
		</div>
	</form>
	
		
        
	<!-- <div class="parent" *ngFor="let user of users">
		<div>
			<img src='{{user.avatar}}' class="ico_s" alt="">
		</div>
		<div class="ms-5">
			<p>{{user.first_name}}</p>
		</div>
		<div class="ms-5">
			<p>{{user.last_name}}</p>
		</div>
		<div class="ms-5">
			<p>{{user.nickname}}</p>
		</div>
		<div class="ms-5">
			<button (click)="addFriendShip(user)"><i class="fa fa-user-plus"></i></button>
		</div>
		<div class="ms-5">
			<button (click)="removeFriendShip(user)">Delete</button>
		</div>
	</div> -->
</div>
<app-friend-invitation [friendPreferneces]="dashboardPreference"></app-friend-invitation>
